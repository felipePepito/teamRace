CREATE TABLE challenge_team (id_challenge_team INT AUTO_INCREMENT NOT NULL, challenge INT DEFAULT NULL, team INT DEFAULT NULL, points DOUBLE DEFAULT NULL, INDEX IDX_CD4FA199D7098951 (challenge), INDEX IDX_CD4FA199C4E0A61F (team), PRIMARY KEY(id_challenge_team)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE challenge_type (id_challenge_type INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT NOT NULL, PRIMARY KEY(id_challenge_type)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE team (id_team INT AUTO_INCREMENT NOT NULL, teamrace INT DEFAULT NULL, name VARCHAR(255) NOT NULL, image VARCHAR(255) DEFAULT NULL, slogan VARCHAR(2048) DEFAULT NULL, INDEX IDX_C4E0A61FCD9728F1 (teamrace), PRIMARY KEY(id_team)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE teamrace (id_teamrace INT AUTO_INCREMENT NOT NULL, creator INT DEFAULT NULL, name VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, dateCreated DATETIME NOT NULL, image VARCHAR(255) DEFAULT NULL, INDEX IDX_CD9728F1BC06EA63 (creator), PRIMARY KEY(id_teamrace)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE message (id_message INT AUTO_INCREMENT NOT NULL, sender INT DEFAULT NULL, recipient INT DEFAULT NULL, text LONGTEXT NOT NULL, date DATETIME NOT NULL, INDEX IDX_B6BD307F5F004ACF (sender), INDEX IDX_B6BD307F6804FB49 (recipient), PRIMARY KEY(id_message)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE challenge (id_challenge INT AUTO_INCREMENT NOT NULL, teamrace INT DEFAULT NULL, tutor INT DEFAULT NULL, challenge_type INT DEFAULT NULL, date DATETIME DEFAULT NULL, max_points DOUBLE DEFAULT NULL, name LONGTEXT NOT NULL, description LONGTEXT DEFAULT NULL, INDEX IDX_D7098951CD9728F1 (teamrace), INDEX IDX_D709895199074648 (tutor), INDEX IDX_D7098951857150AF (challenge_type), PRIMARY KEY(id_challenge)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE blog (id_blog INT AUTO_INCREMENT NOT NULL, teamrace INT DEFAULT NULL, creator INT DEFAULT NULL, headline VARCHAR(255) NOT NULL, text LONGTEXT NOT NULL, date DATETIME NOT NULL, INDEX IDX_C0155143CD9728F1 (teamrace), INDEX IDX_C0155143BC06EA63 (creator), PRIMARY KEY(id_blog)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user (id_user INT AUTO_INCREMENT NOT NULL, email VARCHAR(255) NOT NULL, first_name VARCHAR(255) NOT NULL, last_name VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, active INT NOT NULL, account_created DATETIME NOT NULL, password_requested_at DATETIME DEFAULT NULL, confirmation_token VARCHAR(255) DEFAULT NULL, last_login DATETIME DEFAULT NULL, image VARCHAR(255) DEFAULT NULL, description LONGTEXT DEFAULT NULL, UNIQUE INDEX email_UNIQUE (email), PRIMARY KEY(id_user)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_team (id_user_team INT AUTO_INCREMENT NOT NULL, user INT DEFAULT NULL, team INT DEFAULT NULL, role INT NOT NULL, INDEX IDX_BE61EAD68D93D649 (user), INDEX IDX_BE61EAD6C4E0A61F (team), PRIMARY KEY(id_user_team)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_teamrace (id_user_teamrace INT AUTO_INCREMENT NOT NULL, user INT DEFAULT NULL, teamrace INT DEFAULT NULL, role INT NOT NULL, INDEX IDX_2D1ACCF18D93D649 (user), INDEX IDX_2D1ACCF1CD9728F1 (teamrace), PRIMARY KEY(id_user_teamrace)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE challenge_team ADD CONSTRAINT FK_CD4FA199D7098951 FOREIGN KEY (challenge) REFERENCES challenge (id_challenge);
ALTER TABLE challenge_team ADD CONSTRAINT FK_CD4FA199C4E0A61F FOREIGN KEY (team) REFERENCES team (id_team);
ALTER TABLE team ADD CONSTRAINT FK_C4E0A61FCD9728F1 FOREIGN KEY (teamrace) REFERENCES teamrace (id_teamrace);
ALTER TABLE teamrace ADD CONSTRAINT FK_CD9728F1BC06EA63 FOREIGN KEY (creator) REFERENCES user (id_user);
ALTER TABLE message ADD CONSTRAINT FK_B6BD307F5F004ACF FOREIGN KEY (sender) REFERENCES user (id_user);
ALTER TABLE message ADD CONSTRAINT FK_B6BD307F6804FB49 FOREIGN KEY (recipient) REFERENCES user (id_user);
ALTER TABLE challenge ADD CONSTRAINT FK_D7098951CD9728F1 FOREIGN KEY (teamrace) REFERENCES teamrace (id_teamrace);
ALTER TABLE challenge ADD CONSTRAINT FK_D709895199074648 FOREIGN KEY (tutor) REFERENCES user (id_user);
ALTER TABLE challenge ADD CONSTRAINT FK_D7098951857150AF FOREIGN KEY (challenge_type) REFERENCES challenge_type (id_challenge_type);
ALTER TABLE blog ADD CONSTRAINT FK_C0155143CD9728F1 FOREIGN KEY (teamrace) REFERENCES teamrace (id_teamrace);
ALTER TABLE blog ADD CONSTRAINT FK_C0155143BC06EA63 FOREIGN KEY (creator) REFERENCES user (id_user);
ALTER TABLE user_team ADD CONSTRAINT FK_BE61EAD68D93D649 FOREIGN KEY (user) REFERENCES user (id_user);
ALTER TABLE user_team ADD CONSTRAINT FK_BE61EAD6C4E0A61F FOREIGN KEY (team) REFERENCES team (id_team);
ALTER TABLE user_teamrace ADD CONSTRAINT FK_2D1ACCF18D93D649 FOREIGN KEY (user) REFERENCES user (id_user);
ALTER TABLE user_teamrace ADD CONSTRAINT FK_2D1ACCF1CD9728F1 FOREIGN KEY (teamrace) REFERENCES teamrace (id_teamrace);
